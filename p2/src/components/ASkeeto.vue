<template>
  <div
    :class="classes"
    @click="$emit('add-score', {amount: -1, event: $event})"
    :style="skeetoStyles"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      xml:space="preserve"
      version="1.1"
      style="width: 75px; height: 75px; shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;"
      viewBox="0 0 725 725"
      x="0px"
      y="0px"
    >
      <g
        :class="skeetoHit"
        @click.stop="$emit('add-score', {amount: 1, event: $event}), skeetoHit = 'skeeto_hit'"
      >
        <g class="skeeto_background" fill="transparent">
          <ellipse
            transform="matrix(0.970836 -0.464918 0.473508 0.953224 -174.222 148.702)"
            ry="45.333394"
            rx="180.029137"
            cy="398.512351"
            cx="257.727132"
            stroke="null"
          />
          <ellipse
            transform="matrix(0.993555 0.248113 -0.373538 0.98537 -64.789 -145.778)"
            ry="45.333394"
            rx="180.029137"
            cy="298.232339"
            cx="471.339042"
            stroke="null"
          />
          <ellipse
            transform="matrix(0.761726 0.777693 -0.820435 0.755345 179.321 -306.275)"
            ry="45.333394"
            rx="180.029137"
            cy="207.743616"
            cx="406.83569"
            stroke="null"
          />
          <ellipse
            transform="rotate(36 490.5 384.5)"
            ry="61.333417"
            rx="84.000113"
            cy="384.500028"
            cx="490.500172"
            stroke="null"
          />
          <ellipse ry="34.666713" rx="34.666713" cy="468.500142" cx="578.500291" stroke="null" />
        </g>
        <path
          d="m395.636993,384.806l0,-40.220001c-22.009979,-1.679993 -60.589996,9.959991 -102.470001,26.98999c-71.599991,29.110016 -149.87999,73.75 -176.979996,97.150024c-14.789993,8.539978 -2.5,39.72998 12.380005,28.889984c95.520004,-51.369995 162.599991,-86.519989 267.069992,-112.809998zm-173.829987,-99.769989l52.669983,-49.430008c-9.509979,-3.550003 -18.98999,-6.919998 -28.049988,-9.900009l-6.199997,-1.979996l-51.790009,48.580002c10.410004,5.079987 21.610001,9.269989 33.37001,12.730011zm83.940002,-37.210007l-48.339996,45.360001c40.419983,7 83.970001,8.019989 122.259979,8.339996c-16.009979,-14.309998 -32.070007,-28.610016 -48.139984,-42.940002c-8.01001,-3.419998 -16.720001,-7.080002 -25.779999,-10.759995zm-143.960007,7.929993l43.199997,-40.520004c-18.660004,-2.789993 -37.559998,-2.329987 -55.819992,4.700012c-15.640015,6.039993 -11.12001,12.279999 -1.030014,23.229996c4.190002,4.550003 8.76001,8.729996 13.650009,12.589996zm141.990005,-62.660004l69.059998,-16.169998c-8.429993,-11.419998 -17.420013,-23.029999 -26.790009,-34.449997l-78.149994,18.290009c11.929993,10.799988 23.889984,21.579987 35.880005,32.329987zm88.059998,10.540009l-60.470001,14.149994l16.790009,14.980011c2.5,1.319992 4.339996,3.049988 5.609985,5c23.950012,21.339981 47.869995,42.669998 71.649994,64.020004c5.450012,-2.430023 11.580017,-4.76001 18.149994,-6.559998c-4.059998,-10.740021 -11.859985,-26.100006 -21.049988,-42.62001c-7.679993,-13.800003 -18.200012,-30.710007 -30.679993,-48.970001zm-151.180008,-67.650009l83.12999,-19.459991c-9.720001,-10.790001 -19.669983,-21.120102 -29.649994,-30.620102l-85.969986,20.120102c10.769989,10.010002 21.609985,20 32.48999,29.959991zm-49.75,-57.080093l74.800003,-17.509998c-19.680008,-15.080002 -38.860001,-25.540001 -56.139999,-28.52c-23.710007,-4.08 -24.770004,24.419998 -18.660004,46.029999l0,0zm310.909988,343.120102c-17.720001,9.049988 -31.470001,-17.890015 -13.759979,-26.929993l45.039978,-23.050018c-4.529968,-5.369995 -9.47998,-11 -14.669983,-16.509979l-37.170013,19.029999c-17.72998,9.049988 -31.470001,-17.890015 -13.759979,-26.930023l27.47998,-14.069977c-3.669983,-2.890015 -7.259979,-5.400024 -10.699982,-7.380005c-6.5,-3.75 -13.800018,-4.800018 -21.080017,-4.25l-0.199982,0.019989c-14.02002,1.110016 -27.960022,8.080017 -36.110016,12.890015c-0.179993,1.109985 -0.47998,2.199982 -0.869995,3.259979l0,53.27002l36.329987,45.549988c2.170013,0.410004 4.450012,0.790009 6.810028,1.140015c1.459991,-0.040009 2.939972,0.149994 4.379974,0.599976c19.220001,2.430023 42.900024,2.790009 61.980042,-1.379974c3.809998,-0.830017 7.369995,-1.820007 10.549988,-3l-0.01001,-0.01001c4.029968,-4.019989 8.73999,-7.350006 13.960022,-9.790009c1.039978,-2.059998 1.48999,-4.48999 1.169983,-7.320007l-0.030029,-0.23999c-0.719971,-5.540009 -3.639954,-12.440002 -9.309998,-20.889984c-0.869995,0.690002 -1.849976,1.329987 -2.959961,1.899994l-47.070038,24.089996zm89.76004,-1c9.25,2.059998 17.549988,6.76001 24.069946,13.26001l0.030029,0.029999l0.029968,0.019989l0.100037,0.119995c8.859985,8.929993 14.330017,21.179993 14.330017,34.640015c0,8.220001 -2.02002,15.97998 -5.590027,22.799988l30.710022,75.559998l53.529968,23.859985c18.160034,8.100037 5.859985,35.75 -12.339966,27.630005l-58.340027,-25.98999c-3.809998,-1.440002 -7.029968,-4.409973 -8.679993,-8.47998l-19.619995,-48.340027l-19.809998,56.600037l70.01001,79.509949c13.169983,14.960022 -9.610046,35 -22.77002,20.050049l-75.849976,-86.140015c-3.990051,-4.530029 -4.790039,-10.799988 -2.559998,-16.01001l25.169983,-71.890015c-1.030029,0.059998 -2.070007,0.100037 -3.119995,0.100037c-13.52002,0 -25.820007,-5.51001 -34.76001,-14.440033l-0.030029,-0.029999l-0.029968,-0.029999l-0.109985,-0.109985c-8.860046,-8.940002 -14.330017,-21.190002 -14.330017,-34.649994l0,-0.309998c-10.059998,1.440002 -20.800018,2 -31.390015,1.899994l30.830017,42.559967c2.26001,3.110046 3.330017,7.090027 2.700012,11.180054l-15.52002,100.309998l72.890015,71.709961c14.200012,13.960022 -7.030029,35.570007 -21.230042,21.600037l-78.419983,-77.140015c-3.799988,-3.73999 -5.220001,-9 -4.209991,-13.869995l15.640015,-101.030029l-40.550018,-55.929993c-24.399994,26.690002 -52.119995,44.27002 -82.059998,56.299988l10.75,63.950012c0.630005,3.76001 -0.190002,7.419983 -2.029999,10.429993l-58.769989,107.300049c-9.52002,17.47998 -36.089996,2.98999 -26.570007,-14.480042l56.619995,-103.399963l-9.059998,-53.940002c-51.890015,14.72998 -108.949997,17.269958 -166.130005,23.919983l-161.780094,52.22998c-18.95997,6.080017 -28.20997,-22.73999 -9.25,-28.829956l163.280094,-52.720032c1.779999,-0.570007 3.440002,-0.700012 5.279999,-0.919983c54.930008,-6.410034 112.26001,-8.280029 163.540009,-23.790009l-9.420013,-56.089996c-1.559998,-9.339996 5.779999,-17.880005 15.339996,-17.610016l69.550018,2.100006l-16.660004,-20.890015c-97.420013,24.360016 -176.509995,61.300018 -263.860001,111.679993c-52.409996,32.440002 -80.180099,-48.889984 -44.760002,-79.48999c29.020004,-25.059998 111.150002,-72.179993 185.410011,-102.359985c12.299988,-5 24.470001,-9.559998 36.22998,-13.480011c-72.259995,-4.039978 -147.269989,-17.589996 -192.169991,-66.299988c-23.829994,-25.87001 -26.169998,-57.130005 12.409996,-71.990005c38.960007,-15.029999 79.360001,-7.360001 117.550003,5.180008c3.580017,1.179993 7.220001,2.409988 10.880005,3.689987c-28.949997,-26.069992 -57.710007,-52.279999 -86.020004,-78.749992c-34.380005,-32.090103 -34.98999,-130.700122 34.020004,-118.830132c82.790009,14.27003 192.160004,159.210129 234.299988,234.910126c11.230011,20.179993 20.660004,39.640015 25.160004,54.190002c8.51001,0.779999 17.050018,3.179993 25.209991,7.880005c11.200012,6.470001 22.77002,16.299988 33.559998,27.029999c14.880005,14.799988 28.559998,31.519989 37.540039,43.119995c12.72998,16.440002 19.139954,30.679993 20.72998,42.890015l0.049988,0.449982c0.309998,2.619995 0.429993,5.140015 0.350037,7.570007zm2.659973,34.670013c-3.369995,-3.370026 -8.099976,-5.470001 -13.359985,-5.470001c-1.150024,0 -2.27002,0.099976 -3.369995,0.299988l-0.350037,0.309998c-3.599976,3.190002 -7.76001,5.929993 -12.349976,8.269989c-1.77002,2.880005 -2.809998,6.309998 -2.809998,9.990021c0,5.25 2.089966,9.97998 5.469971,13.350006l0.059998,0.059998c3.369995,3.379974 8.100037,5.470001 13.350037,5.470001c4.959961,0 9.459961,-1.870026 12.769958,-4.910004l0.590027,-0.619995c3.409973,-3.410004 5.52002,-8.130005 5.52002,-13.350006c0,-5.25 -2.090027,-9.980011 -5.460022,-13.350006l-0.059998,-0.049988zm21.570007,-21.240021c5.789978,5.929993 5.72998,15.440002 -0.160034,21.290009l0.160034,-21.290009zm-69.859985,69.290009c-5.780029,-5.940002 -5.720032,-15.440002 0.169983,-21.299988l-0.169983,21.299988zm-170.840027,-8.23999c17.48999,-7.710022 33.970001,-17.640015 49.080017,-30.620026l-54.5,-1.649994l5.419983,32.27002z"
        />
      </g>
    </svg>
  </div>
</template>

<script>
export default {
  data: function() {
    return {
      classes: "fly skeeto",
      skeetoHit: "",
      maxHeight: 85,
      maxTranslateHeight: 300,
      styles: ""
    };
  },
  computed: {
    skeetoStyles: function() {
      const randHeight = random(this.maxHeight);
      let translateHeight = 0;

      // translate up or down, depending on ending height
      if (randHeight <= this.maxHeight / 2) {
        translateHeight = random(this.maxTranslateHeight);
      } else {
        translateHeight = -random(this.maxTranslateHeight);
      }

      const end = "--skeeto-end-height: " + randHeight + "%; ";
      const start = "--skeeto-start-height: " + translateHeight + "%; ";

      return end + start;
    }
  },
  mounted: function() {
    this.disableSkeeto = "";
    // need a delay before removing the class otherwise the CSS transition doesn't occur
    setTimeout(() => (this.classes = "skeeto"), 1);
  }
};

function random(max) {
  return Math.floor(Math.random() * max);
}
</script>

<style scoped>
.skeeto {
  display: inline-block;
  display: block;
  position: relative;
  right: -100%;
  top: 50%;
  top: var(--skeeto-end-height);
  transition-duration: 4s;
  transition-duration: var(--skeeto-speed);
  transition-timing-function: linear;
  transition-property: transform;
}

.skeeto.fly {
  transform: translateX(-110vw) translateY(0%);
  transform: translateX(-110vw) translateY(var(--skeeto-start-height));
}

.skeeto .target {
  background-color: black;
  border-radius: 50%;
}

.skeeto_hit {
  display: none;
}
</style>
